---
source: editoast_derive/src/search.rs
---
// Source
// -----------------------------------------------------------------------------

#[derive(SearchConfigStore)]
#[search_config_store(
    object(name = "track", config = SearchResultItemTrack),
    object(name = "operationalpoint", config = SearchResultItemOperationalPoint),
    object(name = "signal", config = SearchResultItemSignal),
    object(name = "project", config = SearchResultItemProject),
    object(name = "study", config = SearchResultItemStudy),
    object(name = "scenario", config = SearchResultItemScenario),
    object(name = "trainschedule", config = SearchResultItemTrainSchedule),
)]
pub struct SearchStore;

// Macro expansion
// -----------------------------------------------------------------------------

impl search::SearchConfigStore for SearchStore {
    fn find<S: AsRef<str>>(object_name: S) -> Option<search::SearchConfig> {
        match object_name.as_ref() {
            "track" => {
                Some(<SearchResultItemTrack as search::SearchObject>::search_config())
            }
            "operationalpoint" => {
                Some(
                    <SearchResultItemOperationalPoint as search::SearchObject>::search_config(),
                )
            }
            "signal" => {
                Some(<SearchResultItemSignal as search::SearchObject>::search_config())
            }
            "project" => {
                Some(<SearchResultItemProject as search::SearchObject>::search_config())
            }
            "study" => {
                Some(<SearchResultItemStudy as search::SearchObject>::search_config())
            }
            "scenario" => {
                Some(<SearchResultItemScenario as search::SearchObject>::search_config())
            }
            "trainschedule" => {
                Some(
                    <SearchResultItemTrainSchedule as search::SearchObject>::search_config(),
                )
            }
            _ => None,
        }
    }
    fn all() -> Vec<(&'static str, search::SearchConfig)> {
        Vec::from([
            ("track", <SearchResultItemTrack as search::SearchObject>::search_config()),
            (
                "operationalpoint",
                <SearchResultItemOperationalPoint as search::SearchObject>::search_config(),
            ),
            (
                "signal",
                <SearchResultItemSignal as search::SearchObject>::search_config(),
            ),
            (
                "project",
                <SearchResultItemProject as search::SearchObject>::search_config(),
            ),
            ("study", <SearchResultItemStudy as search::SearchObject>::search_config()),
            (
                "scenario",
                <SearchResultItemScenario as search::SearchObject>::search_config(),
            ),
            (
                "trainschedule",
                <SearchResultItemTrainSchedule as search::SearchObject>::search_config(),
            ),
        ])
    }
}
#[derive(Serialize, ToSchema)]
#[serde(untagged)]
#[allow(unused, clippy::enum_variant_names)]
/// A search result item that depends on the query's `object`
pub(super) enum SearchResultItem {
    SearchResultItemTrack(SearchResultItemTrack),
    SearchResultItemOperationalPoint(SearchResultItemOperationalPoint),
    SearchResultItemSignal(SearchResultItemSignal),
    SearchResultItemProject(SearchResultItemProject),
    SearchResultItemStudy(SearchResultItemStudy),
    SearchResultItemScenario(SearchResultItemScenario),
    SearchResultItemTrainSchedule(SearchResultItemTrainSchedule),
}
